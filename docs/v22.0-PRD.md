# v22.0 PRD: 秘术卷轴 UI 全面优化

## 1. 问题诊断

### 用户反馈
1. **学习内容展示粗糙** — 速查模式的卡片缺少CSS样式（`.quick-view-card-title`, `.quick-view-card-items`, `.quick-view-item` 无CSS定义），内容排版混乱
2. **探索模式莫名其妙** — 没有任何介绍说明，用户不知道这是什么、怎么玩
3. **大量"???"令人困惑** — 未解锁的神庙显示为"？？？·？？？神庙"，不能激发探索欲，反而让小朋友觉得"怪怪的"
4. **返回按钮和菜单随意** — 页面导航不够直观

### 技术问题
- `quick-view-card-title`, `quick-view-card-items`, `quick-view-item` 三个 class 在 knowledge.css 中**完全没有CSS规则**
- `.quick-view-card` 设为 `display: flex; align-items: center;`，导致标题和内容水平排列而非垂直
- 速查模式缺少 `knowledge-practice-btn` 的样式
- 探索模式的 header 用了 `h2` 但 CSS 只定义了 `h1`

## 2. 设计灵感

### 塞尔达TotK 希卡之石/普尔亚平板
- **图鉴不用"???"** — 未发现的条目显示为轮廓/剪影，你能看到大致形状，激发好奇心
- **自然解锁** — 只要接触过就记录，不需要特殊操作
- **分类清晰** — 武器/弓/盾/素材/怪物/生物，一目了然
- **详情丰富** — 每个条目有图片、描述、使用提示

### 宝可梦图鉴
- **捕获前也能看到名字** — 如果在战斗中见过，就显示轮廓+名字
- **区域图鉴** — 每个地区有独立图鉴，鼓励探索不同区域
- **完成度明确** — "已发现X种 / 已捕获X种"

### 设计原则
1. **先学习，后探索** — 学习内容是核心功能，必须第一时间看到
2. **所有内容可见** — 不用"???"隐藏，用"未练习/已练习/已掌握"区分
3. **探索有引导** — 用简短文案解释探索模式的意义
4. **视觉统一精致** — 每个元素都有合适的样式

## 3. 改动方案

### 3.1 速查模式 — 全面补充CSS

修复所有缺失的 CSS，让学习卡片正确显示：
- `.quick-view-card` 改为 `flex-direction: column`
- `.quick-view-card-title` 添加标题样式（加粗、颜色）
- `.quick-view-card-items` 添加 flex-wrap 布局
- `.quick-view-item` 添加标签样式（pill badge）
- 模式切换按钮加强视觉区分

### 3.2 探索模式 — 加引导 + 去掉锁定

**引导横幅**: 在地图顶部加简短说明
```
🗺️ 知识冒险地图
通过练习和战斗探索各区域，记录你掌握的数学知识！
点击任意区域查看详情。
```

**去掉"???"**: 未练习的知识点也显示真实名字和内容，只是用灰色/淡化样式标记为"未练习"。这样小朋友能看到有什么内容等着他们去学。

状态改为：
- 未练习（灰色标记）— 替代"undiscovered/???"
- 已练习（蓝色标记）— 替代"discovered"
- 已掌握（绿色标记）— 替代"mastered"
- 完美掌握（金色标记）— 替代"perfected"

### 3.3 Header 优化

- 标题从"📜 海拉鲁知识图鉴"改为"📜 秘术卷轴"（保持用户熟悉的名字）
- 返回按钮样式统一

### 3.4 知识详情页优化

- 无论练习与否都显示完整内容（公式、技巧、战斗效果）
- 未练习的内容增加"去练习"按钮引导

## 4. 文件变更

| 文件 | 改动 |
|------|------|
| `css/knowledge.css` | **中改**: 补充速查卡片CSS + 优化布局 |
| `js/knowledge-ui.js` | **中改**: 去掉锁定逻辑 + 加探索引导 + 优化header |
| `index.html` | **小改**: header标题修改 |

## 5. 验证清单

- [ ] 速查模式的学习卡片排版正确（标题+内容分行）
- [ ] 学习内容（公式、口诀）清晰可读
- [ ] 探索模式顶部有引导说明
- [ ] 所有知识点不再显示"???"，而是显示真实名字
- [ ] 未练习的知识点用灰色标记但内容可见
- [ ] header标题和返回按钮样式统一
