# v18.0 PRDï¼šé­”å¹»æˆ˜æ–—åœºæ™¯è§†è§‰å¤§å‡çº§

> ç‰ˆæœ¬ï¼šv18.0 | ä»£å·ï¼šæ²‰æµ¸ä¹‹å¢ƒ | ç›®æ ‡ï¼šè®©æ¯åœºæˆ˜æ–—éƒ½åƒè¿›å…¥ä¸€ä¸ªç‹¬ç«‹çš„é­”æ³•ä¸–ç•Œ

---

## ä¸€ã€èƒŒæ™¯ä¸é—®é¢˜

### å½“å‰çŠ¶æ€ (v17.1.1)
- 4å±‚CSSåœºæ™¯ç³»ç»Ÿï¼ˆsky/far/mid/effectsï¼‰+ JSåŠ¨æ€emojiç²’å­
- 24ç§å±æ€§åœºæ™¯ï¼Œæ¯ç§æœ‰ç‹¬ç«‹é…è‰²å’ŒåŸºæœ¬å‰ªå½±
- æµ®åŠ¨emojiè£…é¥°ï¼ˆğŸ”¥â„ï¸ğŸŒŠç­‰ï¼‰

### ç”¨æˆ·åé¦ˆ
- "ä½“éªŒæ„Ÿæ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„å˜åŒ–"
- "çº¯ç²¹åªæ˜¯æ”¹é¢œè‰²è¿˜æ˜¯æ˜¾å¾—æœ‰ä¸€ç‚¹å•è°ƒ"
- èƒŒæ™¯éœ€è¦**æ›´åä¸½ã€æ›´é€‚åˆé­”å¹»æ‰“æ€ªä¸»é¢˜**
- éœ€è¦è®©å°æœ‹å‹è¿›æ¥æœ‰**æ–°é²œæ„Ÿ**å’Œ**æ²‰æµ¸æ„Ÿ**

### æ ¸å¿ƒé—®é¢˜åˆ†æ
1. **æš—è‰²å‰ªå½±åœ¨æš—è‰²èƒŒæ™¯ä¸Šå‡ ä¹ä¸å¯è§** â€” ç¼ºä¹å¯¹æ¯”åº¦å’Œå‘å…‰è¾¹ç¼˜
2. **ç¼ºå°‘å¤§å‹åŠ¨æ€å…ƒç´ ** â€” åªæœ‰å°ç‚¹/å°emojiï¼Œæ²¡æœ‰ç§»åŠ¨çš„äº‘å±‚ã€æµåŠ¨çš„å²©æµ†ç­‰å¤§ç‰¹æ•ˆ
3. **åœºæ™¯ä¹‹é—´å·®å¼‚ä¸å¤Ÿæ˜æ˜¾** â€” é…è‰²å˜åŒ–å¾®å¦™ï¼Œç¼ºä¹æ ‡å¿—æ€§è§†è§‰å…ƒç´ 
4. **æ²¡æœ‰ç¯å¢ƒå…‰æ•ˆ** â€” æ²¡æœ‰æ··åˆæ¨¡å¼ã€æ²¡æœ‰è‰²å½©æ»¤é•œï¼Œæ•´ä½“æ°›å›´ä¸å¤Ÿé­”å¹»
5. **ç¼ºä¹æ·±åº¦æ„Ÿ** â€” æ‰€æœ‰å…ƒç´ åœ¨åŒä¸€å¹³é¢ï¼Œæ²¡æœ‰çœŸæ­£çš„è§†å·®è¿åŠ¨

---

## äºŒã€æŠ€æœ¯è°ƒç ”æ€»ç»“

### è°ƒç ”æ¥æº
åŸºäºå¯¹ä»¥ä¸‹æ–¹å‘çš„æ·±åº¦è°ƒç ”ï¼šCSS-onlyæ¸¸æˆè‰ºæœ¯ã€Lynn Fisherå•divæŠ€æœ¯ã€CSSè§†å·®ã€ç²’å­ç³»ç»Ÿã€SVGå†…è”ã€CSSæ··åˆæ¨¡å¼ã€ç§»åŠ¨ç«¯æ€§èƒ½åŸºå‡†ç­‰ã€‚

### å…³é”®å‘ç°

| æŠ€æœ¯ | è§†è§‰æ•ˆæœ | æ€§èƒ½ | é€‚åˆåº¦ |
|------|---------|------|--------|
| **å¤šè‰²åœæ¸å˜å¤©ç©º**ï¼ˆ10+è‰²åœï¼‰ | â˜…â˜…â˜…â˜…â˜… | æä½³(0å¼€é”€) | å®Œç¾ |
| **clip-pathå‰ªå½± + drop-shadowå‘å…‰** | â˜…â˜…â˜…â˜…â˜… | æä½³ | å®Œç¾ |
| **mix-blend-modeå åŠ å±‚** | â˜…â˜…â˜…â˜…â˜† | å¥½(1-2å±‚) | å®Œç¾ |
| **CSS filteråœºæ™¯æ°›å›´** | â˜…â˜…â˜…â˜…â˜† | å¥½(å•å®¹å™¨) | å®Œç¾ |
| **transformè§†å·®åŠ¨ç”»** | â˜…â˜…â˜…â˜…â˜† | å¥½(3-5å±‚) | ä¼˜ç§€ |
| **SVG data:URIå†…è”å›¾å½¢** | â˜…â˜…â˜…â˜…â˜† | æä½³(é™æ€) | ä¼˜ç§€ |
| **box-shadowæ˜Ÿç©ºåœº** | â˜…â˜…â˜…â˜†â˜† | å¥½(å•å±‚) | ä¼˜ç§€ |
| **radial-gradientå…‰æº** | â˜…â˜…â˜…â˜…â˜† | æä½³(0å¼€é”€) | å®Œç¾ |
| **hue-rotateè‰²å½©å¾ªç¯** | â˜…â˜…â˜…â˜†â˜† | å¥½(GPU) | å¯ç”¨ |
| **backdrop-filteræ¨¡ç³Š** | â˜…â˜…â˜…â˜†â˜† | å·®(ç§»åŠ¨ç«¯) | è°¨æ… |

### ç§»åŠ¨ç«¯æ€§èƒ½é¢„ç®—ï¼ˆ35vhç«æŠ€åœºï¼‰
- **3-5ä¸ªè§†å·®å±‚**ï¼šå„è‡ªtransformåŠ¨ç”» âœ…
- **20-40ä¸ªç²’å­å…ƒç´ **ï¼štransform+opacityåŠ¨ç”» âœ…
- **1-2ä¸ªblend-modeå åŠ **ï¼šmix-blend-mode âœ…
- **æ— é™é™æ€æ¸å˜å±‚**ï¼š0åŠ¨ç”»å¼€é”€ âœ…
- **1ä¸ªCSS filter**ï¼šåº”ç”¨äºæ•´ä¸ªç«æŠ€åœº âœ…
- **æ€»è®¡ï¼šçº¦30-50ä¸ªåŒæ—¶åŠ¨ç”»å…ƒç´ **ï¼Œå…¨éƒ¨ä½¿ç”¨transform/opacity

---

## ä¸‰ã€æ¶æ„è®¾è®¡

### 3.1 æ–°å¢å±‚çº§ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ .battle-arena                              â”‚
â”‚ â”œâ”€â”€ .scene-sky          (z:0) å¤šåœæ¸å˜å¤©ç©º  â”‚
â”‚ â”œâ”€â”€ .scene-stars        (z:1) æ˜Ÿç©º/å¤©ä½“ NEW â”‚
â”‚ â”œâ”€â”€ .scene-far          (z:2) è¿œæ™¯å‰ªå½±+å‘å…‰  â”‚
â”‚ â”œâ”€â”€ .scene-far-detail   (z:3) SVGè£…é¥° NEW   â”‚
â”‚ â”œâ”€â”€ .scene-mid          (z:4) ä¸­æ™¯å‰ªå½±       â”‚
â”‚ â”œâ”€â”€ .scene-mid-detail   (z:5) SVGè£…é¥° NEW   â”‚
â”‚ â”œâ”€â”€ .scene-effects      (z:6) ç²’å­ç‰¹æ•ˆ       â”‚
â”‚ â”œâ”€â”€ .scene-atmosphere   (z:7) æ°›å›´å åŠ  NEW   â”‚
â”‚ â”œâ”€â”€ .scene-element(s)   (z:8) JSåŠ¨æ€å…ƒç´      â”‚
â”‚ â”œâ”€â”€ .arena-ground       (z:9) åœ°é¢           â”‚
â”‚ â”œâ”€â”€ .hero-side          (z:10) ä¸»è§’          â”‚
â”‚ â”œâ”€â”€ .enemy-side         (z:10) æ€ªç‰©          â”‚
â”‚ â””â”€â”€ .attack-zone        (z:11) æ”»å‡»åŒºåŸŸ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ–°å¢4ä¸ªå±‚**ï¼š
- `.scene-stars` â€” æ˜Ÿç©º/å¤©ä½“å±‚ï¼ˆæœˆäº®ã€æ˜Ÿæ˜Ÿã€æå…‰ï¼‰
- `.scene-far-detail` â€” è¿œæ™¯SVGè£…é¥°ï¼ˆå»ºç­‘ç»†èŠ‚ã€æ ‘å† è½®å»“ï¼‰
- `.scene-mid-detail` â€” ä¸­æ™¯SVGè£…é¥°ï¼ˆç«æŠŠã€æ°´æ™¶ã€èŠ±è‰ï¼‰
- `.scene-atmosphere` â€” æ°›å›´å åŠ å±‚ï¼ˆæ··åˆæ¨¡å¼å…‰æ•ˆï¼‰

### 3.2 æ¯å±‚æŠ€æœ¯æ–¹æ¡ˆ

#### Layer 0: .scene-sky â€” å¯Œæ¸å˜å¤©ç©º
**å½“å‰**ï¼šå•ä¸€4è‰²linear-gradient
**å‡çº§**ï¼š10+è‰²åœæ¸å˜ + radial-gradientå…‰æºå åŠ 

```css
/* ç«ç³»å¤©ç©ºç¤ºä¾‹ */
.scene-sky.fire-scene {
    background:
        /* ç«å±±å£æ–¹å‘çš„å…‰æ™• */
        radial-gradient(ellipse at 45% 85%, rgba(255,120,0,0.4) 0%, transparent 45%),
        /* å¤©ç©ºçš„çƒ­æµªæ‰­æ›²æ„Ÿ */
        radial-gradient(ellipse at 70% 30%, rgba(180,50,0,0.15) 0%, transparent 40%),
        /* å¤šè‰²åœå¤©ç©ºä¸»ä½“ */
        linear-gradient(180deg,
            #0a0200 0%,        /* æ·±ç©º */
            #1a0500 10%,
            #3a0e00 20%,
            #5a1800 35%,       /* æš—çº¢å¤©é™… */
            #8b2500 50%,       /* ç†”å²©çº¢ */
            #b33000 65%,
            #cc4400 75%,       /* ç«ç„°æ©™ */
            #8b2500 85%,
            #4a1200 95%,
            #1a0500 100%       /* åœ°å¹³çº¿æš—å¤„ */
        );
}
```

#### Layer 1: .scene-stars â€” å¤©ä½“ä¸æ˜Ÿç©º
**æŠ€æœ¯**ï¼šbox-shadowæ˜Ÿç©ºåœº + radial-gradientæœˆäº®/å¤ªé˜³

- ç«ç³»/é¾™ç³»ï¼šæ— æ˜Ÿç©ºï¼Œç”¨çƒ­æµªå…‰æ™•
- å†°ç³»ï¼šæå…‰å¸¦(animatedæ¸å˜æ¡)
- æš—ç³»/é¬¼ç³»ï¼šå¤§æœˆäº® + ç¨€ç–æ˜Ÿç©º
- è‰ç³»/å¦–ç²¾ç³»ï¼šå°æœˆäº® + è¤ç«è™«
- å…‰ç³»ï¼šå¤ªé˜³å…‰çº¿æ”¾å°„
- æ™®é€šç³»ï¼šæ ‡å‡†æ˜Ÿç©º

```css
.scene-stars.ghost-scene::before {
    /* æœˆäº® */
    content: '';
    position: absolute;
    top: 8%;
    right: 15%;
    width: 35px;
    height: 35px;
    border-radius: 50%;
    background: radial-gradient(circle at 60% 40%,
        rgba(255,250,220,0.95) 0%,
        rgba(255,240,180,0.6) 50%,
        transparent 70%
    );
    box-shadow:
        0 0 20px rgba(255,250,200,0.4),
        0 0 40px rgba(255,250,200,0.2),
        0 0 80px rgba(255,250,200,0.1);
}
.scene-stars.ghost-scene::after {
    /* æ˜Ÿç©º */
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 2px; height: 2px;
    background: transparent;
    box-shadow:
        15px 12px 1px rgba(255,255,255,0.6),
        48px 28px 0px rgba(255,255,255,0.4),
        /* ... 20-30ä¸ªæ˜Ÿæ˜Ÿ ... */
        ;
    animation: twinkle-stars 5s ease-in-out infinite;
}
```

#### Layer 2-3: .scene-far + .scene-far-detail â€” è¿œæ™¯
**å‡çº§ç‚¹**ï¼š
1. å‰ªå½±æ·»åŠ  `filter: drop-shadow(0 0 Npx color)` å‘å…‰è½®å»“
2. æ·»åŠ SVG data:URIç²¾ç»†å›¾å½¢ï¼ˆåŸå ¡çª—æˆ·ã€ç«å±±çº¹ç†ã€å†°æ™¶è£‚çº¹ï¼‰
3. æ…¢é€ŸdriftåŠ¨ç”»ï¼ˆ0.5-2px/sæ°´å¹³æ¼‚ç§»ï¼‰åˆ›é€ æ·±åº¦æ„Ÿ

```css
/* å‰ªå½±å‘å…‰ */
.scene-far.fire-scene::before {
    /* ç°æœ‰clip-pathä¸å˜ */
    filter: drop-shadow(0 -5px 15px rgba(255,80,0,0.35));
}

/* SVGè£…é¥°ï¼šç«å±±å£çƒŸé›¾çº¹ç† */
.scene-far-detail.fire-scene::before {
    content: '';
    position: absolute;
    top: 15%;
    left: 40%;
    width: 20%;
    height: 25%;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cellipse cx='50' cy='70' rx='40' ry='20' fill='rgba(180,60,0,0.2)' /%3E%3Cellipse cx='45' cy='50' rx='25' ry='15' fill='rgba(200,80,0,0.15)' /%3E%3Cellipse cx='55' cy='35' rx='15' ry='10' fill='rgba(220,100,0,0.1)' /%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    animation: smoke-rise 8s ease-in-out infinite;
}
```

#### Layer 4-5: .scene-mid + .scene-mid-detail â€” ä¸­æ™¯
**å‡çº§ç‚¹**ï¼š
1. ä¸­æ™¯å‰ªå½±æ›´é«˜å¯¹æ¯”åº¦ï¼ˆæ¯”è¿œæ™¯æ›´æ·±çš„é¢œè‰²ï¼‰
2. SVGè£…é¥°æ·»åŠ äº’åŠ¨å…ƒç´ ï¼ˆç«æŠŠçš„ç«ç„°ã€æ°´æ™¶çš„æŠ˜å°„ã€è—¤è”“çš„æ‘†åŠ¨ï¼‰
3. éƒ¨åˆ†å…ƒç´ æœ‰sway/pulseå¾®åŠ¨ç”»

```css
/* SVGç«æŠŠ */
.scene-mid-detail.dark-scene::before {
    content: '';
    position: absolute;
    bottom: 25%;
    left: 8%;
    width: 15px;
    height: 40px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 80'%3E%3Crect x='12' y='30' width='6' height='50' fill='%23332211'/%3E%3Cellipse cx='15' cy='28' rx='8' ry='12' fill='%23ff6600' opacity='0.8'/%3E%3Cellipse cx='15' cy='22' rx='5' ry='8' fill='%23ffaa00' opacity='0.6'/%3E%3Cellipse cx='15' cy='18' rx='3' ry='5' fill='%23ffdd00' opacity='0.4'/%3E%3C/svg%3E");
    background-size: contain;
    background-repeat: no-repeat;
    animation: torch-flicker 1.5s ease-in-out infinite;
}
```

#### Layer 6: .scene-effects â€” ç²’å­ç‰¹æ•ˆï¼ˆä¿æŒç°æœ‰ï¼‰
å·²æœ‰çš„::before/::after box-shadowç²’å­ç³»ç»Ÿï¼Œä¿æŒä¸å˜ã€‚

#### Layer 7: .scene-atmosphere â€” æ°›å›´å åŠ å±‚ â­æ ¸å¿ƒæ–°å¢
**è¿™æ˜¯è§†è§‰æ•ˆæœæå‡æœ€å¤§çš„ä¸€å±‚ï¼**

ä½¿ç”¨ `mix-blend-mode` åˆ›å»ºç”µå½±çº§å…‰ç…§æ•ˆæœï¼š

```css
.scene-atmosphere {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 7;
}

/* ç«ç³»ï¼šåº•éƒ¨å²©æµ†å…‰ç…§ */
.scene-atmosphere.fire-scene {
    background:
        radial-gradient(ellipse at 50% 100%,
            rgba(255,80,0,0.35) 0%,
            rgba(200,50,0,0.15) 30%,
            transparent 60%
        ),
        radial-gradient(ellipse at 45% 85%,
            rgba(255,200,100,0.12) 0%,
            transparent 40%
        );
    mix-blend-mode: screen;
    animation: atmosphere-pulse 6s ease-in-out infinite;
}

/* å†°ç³»ï¼šå†·å…‰ç…§ */
.scene-atmosphere.ice-scene {
    background:
        radial-gradient(ellipse at 50% 20%,
            rgba(100,200,255,0.15) 0%,
            transparent 50%
        ),
        linear-gradient(180deg,
            rgba(150,220,255,0.05) 0%,
            transparent 40%,
            rgba(100,200,255,0.08) 100%
        );
    mix-blend-mode: screen;
}

/* æš—ç³»ï¼šæš—è§’æ•ˆæœ */
.scene-atmosphere.dark-scene {
    background:
        radial-gradient(ellipse at 50% 50%,
            transparent 30%,
            rgba(0,0,0,0.4) 100%
        );
    mix-blend-mode: multiply;
}
```

#### Layer 8: .scene-element(s) â€” JSåŠ¨æ€å…ƒç´ ï¼ˆä¿æŒç°æœ‰ï¼‰
å·²æœ‰çš„24ç§åœºæ™¯emojiç²’å­ç”Ÿæˆå™¨ï¼Œä¿æŒä¸å˜ã€‚

### 3.3 CSS Filter åœºæ™¯æ°›å›´

å¯¹æ•´ä¸ª `.battle-arena` åº”ç”¨CSS filterï¼Œæ ¹æ®åœºæ™¯ç±»å‹æ”¹å˜æ•´ä½“è‰²è°ƒï¼š

```css
/* ç«ç³»ï¼šé«˜å¯¹æ¯”æš–è‰²è°ƒ */
.battle-arena.mood-fire {
    filter: contrast(1.1) brightness(1.05) saturate(1.2);
}

/* å†°ç³»ï¼šå†·è‰²åè“ */
.battle-arena.mood-ice {
    filter: contrast(1.05) brightness(1.1) hue-rotate(-5deg) saturate(1.1);
}

/* æš—ç³»ï¼šå»é¥±å’Œæš—è‰² */
.battle-arena.mood-dark {
    filter: contrast(1.15) brightness(0.85) saturate(0.8);
}

/* å¤ä»£ç³»ï¼šæ³›é»„æ—§è‰²è°ƒ */
.battle-arena.mood-ancient {
    filter: sepia(0.15) contrast(1.05) brightness(0.95);
}

/* å¦–ç²¾ç³»ï¼šæŸ”å’Œç²‰è‰² */
.battle-arena.mood-fairy {
    filter: brightness(1.1) saturate(1.3) hue-rotate(5deg);
}
```

---

## å››ã€24ç§åœºæ™¯è¯¦ç»†è®¾è®¡

### æ ‡å¿—æ€§è§†è§‰å…ƒç´ ä¸€è§ˆ

| å±æ€§ | å¤©ç©ºç‰¹å¾ | æ ‡å¿—å»ºç­‘/åœ°å½¢ | SVGè£…é¥° | æ°›å›´å…‰æ•ˆ | ç‰¹æ®Šç²’å­ |
|------|---------|-------------|---------|---------|---------|
| ğŸ”¥ç«ç³» | 10è‰²ç†”å²©å¤©é™… | åŒç«å±±å‰ªå½± | çƒŸé›¾SVG | åº•éƒ¨æ©™è‰²screen | ä¸Šå‡ç«ç„° |
| ğŸ’§æ°´ç³» | æ·±æµ·æ¸å˜ | æ³¢æµªå å±‚ | çŠç‘šSVG | åº•éƒ¨è“è‰²screen | ä¸Šå‡æ°”æ³¡ |
| â„ï¸å†°ç³» | æå…‰å¤©å¹• | é”¯é½¿å†°å±± | å†°æ™¶SVG | é¡¶éƒ¨å†·å…‰screen | é£˜è½é›ªèŠ± |
| âš¡é›·ç³» | ä¹Œäº‘å¯†å¸ƒ | åŸå¸‚å¤©é™…çº¿ | é¿é›·é’ˆSVG | é—ªç”µflash | ç”µå¼§é—ªçƒ |
| ğŸŒ¿è‰ç³» | æœˆå¤œæ˜Ÿç©º | èµ·ä¼ä¸˜é™µ | å¤§æ ‘SVG | åº•éƒ¨ç»¿è‰²screen | é£˜è½æ ‘å¶ |
| ğŸŒ‘æš—ç³» | è¿‘é»‘ç´«è‰² | å“¥ç‰¹åŸå ¡ | ç«æŠŠSVG | æš—è§’multiply | å¹½é­‚å…‰çƒ |
| ğŸ‘»é¬¼ç³» | å¤§æœˆäº®å¤œç©º | é¬¼å±‹å‰ªå½± | æ …æ ç¯ç¬¼SVG | è“ç»¿screen | é¬¼ç«é£˜æµ® |
| ğŸ‰é¾™ç³» | æ˜Ÿç©º+é‡‘è‰² | ç«å±±æ‚¬å´– | é¾™çˆªå²©SVG | ç´«é‡‘screen | ç«ç„°+çƒ­æµª |
| ğŸ§šå¦–ç²¾ç³» | ç²‰ç´«æ˜Ÿç©º | è˜‘è‡æ£®æ— | èŠ±æœµè˜‘è‡SVG | ç²‰è‰²screen | é—ªå…‰ç²’å­ |
| â˜ ï¸æ¯’ç³» | æ¯’ç»¿ç´«è‰² | æ¯æ ‘æ²¼æ³½ | æ¯’æ± SVG | ç»¿ç´«screen | æ¯’æ³¡ä¸Šå‡ |
| ğŸª¨å²©çŸ³ç³» | é»„è¤è‰² | å°åœ°æ‚¬å´– | å²©çŸ³è£‚çº¹SVG | åº•éƒ¨è¤è‰²screen | è½çŸ³ç²’å­ |
| ğŸ”®è¶…èƒ½ç³» | ç²‰ç´«æ‰­æ›² | æµ®ç©ºç¢çŸ³ | æ°´æ™¶æŸ±SVG | ç²‰ç´«è„‰å†²screen | èƒ½é‡çƒè½¨é“ |
| âš™ï¸é’¢ç³» | ç°è‰²å·¥ä¸š | å·¥å‚çƒŸå›± | é½¿è½®SVG | é“¶è‰²screen | ç«èŠ±é—ªçƒ |
| ğŸ¥Šæ ¼æ–—ç³» | æš—çº¢æš—æ©™ | æ–—å…½åœºé˜¶æ¢¯ | ç«æŠŠSVG | çº¢è‰²screen | çƒ­æµªçº¹ç† |
| ğŸŒªï¸é£ç³» | æ·±é’è“ | æµ®ç©ºå²› | ç€‘å¸ƒçº¿SVG | é’è‰²screen | é£çº¿æ‰«è¿‡ |
| â˜€ï¸å…‰ç³» | é‡‘è‰²æ”¾å°„ | ç¥æ®¿å¡”å°– | å…‰æŸ±SVG | é‡‘è‰²screen | é‡‘ç²’é£˜è½ |
| ğŸ˜ˆæ¶é­”ç³» | è¡€çº¢åˆ°é»‘ | åœ°ç‹±é—¨+å°–åˆº | é”é“¾SVG | è¡€çº¢screen | çº¢è‰²ä½™çƒ¬ |
| ğŸ¦é‡å…½ç³» | æš—æ©™æš—è¤ | éæ´²åˆæ¬¢æ ‘ | çŒæœ¨SVG | æš–è¤screen | æ²™å°˜é£˜æµ® |
| ğŸ›ï¸å¤ä»£ç³» | ç°é‡‘è‰² | é‡‘å­—å¡”åºŸå¢Ÿ | çŸ³ç¢‘SVG | æ³›é»„sepia | æ²™ç²’+ç¬¦æ–‡ |
| ğŸ‘»çµç³» | æš—ç´«è“ | é›¾ä¸­å±±è„‰ | ç©ºçµæ ‘SVG | è“ç´«screen | è“ç™½å…‰çƒ |
| ğŸ„ç”Ÿç‰©ç³» | æ·±ç»¿æ·±è“ | å·¨å‹è˜‘è‡æ— | è—¤è”“SVG | ç»¿è‰²screen | å­¢å­å‘å…‰ |
| ğŸ§™å·«å¸ˆç³» | æ˜Ÿç©ºæ·±ç´« | å·«å¸ˆå¡” | æµ®ä¹¦é­”æ³•é˜µSVG | è“ç´«screen | é­”æ³•ç²’å­ |
| ğŸ›è™«ç³» | é»„ç»¿è‰² | èœ‚å·¢/èšä¸˜ | è››ç½‘å¶ç‰‡SVG | é»„ç»¿screen | è¤ç«è™«è„‰å†² |
| â­æ™®é€šç³» | ç°è“æ˜Ÿç©º | å¹³ç¼“ä¸˜é™µ | å›´æ è·¯ç¯SVG | æŸ”å’Œgrey | æ˜Ÿæ˜Ÿé—ªçƒ |

---

## äº”ã€SVGè£…é¥°ç³»ç»Ÿè®¾è®¡

### 5.1 SVG inline data:URI æ–¹æ¡ˆ

æ¯ä¸ªåœºæ™¯æä¾›2-4ä¸ªSVGè£…é¥°ï¼ŒåµŒå…¥CSSçš„background-imageä¸­ã€‚SVGä¿æŒç®€æ´ï¼ˆæ¯ä¸ª< 1KBï¼‰ï¼Œç¡®ä¿æ€§èƒ½ã€‚

### 5.2 ç¤ºä¾‹SVGåº“

#### ç«æŠŠ (æš—ç³»/æ ¼æ–—ç³»é€šç”¨)
```svg
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 80'>
  <rect x='12' y='35' width='6' height='45' fill='#4a3020' rx='1'/>
  <ellipse cx='15' cy='30' rx='8' ry='14' fill='#ff6600' opacity='0.7'/>
  <ellipse cx='15' cy='24' rx='5' ry='9' fill='#ff9900' opacity='0.5'/>
  <ellipse cx='15' cy='19' rx='3' ry='5' fill='#ffcc00' opacity='0.3'/>
</svg>
```

#### æ°´æ™¶æŸ± (è¶…èƒ½ç³»/å†°ç³»é€šç”¨)
```svg
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 100'>
  <polygon points='20,0 35,35 30,100 10,100 5,35' fill='#4ecdc4' opacity='0.6'/>
  <polygon points='20,0 25,35 22,100 18,100 15,35' fill='#7eddd6' opacity='0.3'/>
  <line x1='20' y1='0' x2='30' y2='100' stroke='white' stroke-width='0.5' opacity='0.2'/>
</svg>
```

#### è˜‘è‡ (å¦–ç²¾ç³»/ç”Ÿç‰©ç³»é€šç”¨)
```svg
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 60'>
  <ellipse cx='25' cy='25' rx='22' ry='18' fill='#cc4488' opacity='0.7'/>
  <ellipse cx='25' cy='25' rx='22' ry='18' fill='none' stroke='#ff66aa' stroke-width='0.5' opacity='0.3'/>
  <rect x='20' y='25' width='10' height='35' fill='#eeddcc' opacity='0.5' rx='3'/>
  <circle cx='15' cy='18' r='4' fill='white' opacity='0.3'/>
  <circle cx='30' cy='15' r='3' fill='white' opacity='0.2'/>
</svg>
```

#### åˆæ¬¢æ ‘ (é‡å…½ç³»)
```svg
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 80 100'>
  <rect x='37' y='40' width='6' height='60' fill='#2a1a0a'/>
  <ellipse cx='40' cy='35' rx='35' ry='12' fill='#1a3a0a' opacity='0.7'/>
  <ellipse cx='40' cy='33' rx='30' ry='8' fill='#0a2505' opacity='0.5'/>
</svg>
```

### 5.3 SVGå¯å¤ç”¨åº“

å»ºç«‹ä¸€å¥—é€šç”¨SVGç»„ä»¶ï¼Œå¤šä¸ªåœºæ™¯å…±äº«ï¼š
- **ç«æŠŠ** â†’ æš—ç³»ã€æ ¼æ–—ç³»ã€å¤ä»£ç³»
- **æ°´æ™¶** â†’ å†°ç³»ã€è¶…èƒ½ç³»ã€é¾™ç³»
- **è˜‘è‡** â†’ å¦–ç²¾ç³»ã€ç”Ÿç‰©ç³»ã€æ¯’ç³»
- **æ¯æ ‘** â†’ æš—ç³»ã€é¬¼ç³»ã€æ¯’ç³»
- **å²©çŸ³** â†’ å²©çŸ³ç³»ã€æ ¼æ–—ç³»ã€é¾™ç³»
- **èŠ±æœµ** â†’ è‰ç³»ã€å¦–ç²¾ç³»ã€è™«ç³»
- **é½¿è½®** â†’ é’¢ç³»
- **ç¬¦æ–‡** â†’ å·«å¸ˆç³»ã€å¤ä»£ç³»ã€çµç³»

---

## å…­ã€åŠ¨ç”»ç³»ç»Ÿè®¾è®¡

### 6.1 è§†å·®å±‚åŠ¨ç”»

è¿œæ™¯å’Œä¸­æ™¯çš„å¾®å°æ°´å¹³æ¼‚ç§»ï¼Œåˆ›é€ æ·±åº¦æ„Ÿï¼š

```css
/* è¿œæ™¯ï¼šææ…¢æ¼‚ç§» */
.scene-far-detail {
    animation: parallax-far 60s linear infinite;
}
@keyframes parallax-far {
    0% { transform: translateX(0); }
    50% { transform: translateX(-3%); }
    100% { transform: translateX(0); }
}

/* ä¸­æ™¯ï¼šç¨å¿«æ¼‚ç§» */
.scene-mid-detail {
    animation: parallax-mid 40s linear infinite;
}
@keyframes parallax-mid {
    0% { transform: translateX(0); }
    50% { transform: translateX(-5%); }
    100% { transform: translateX(0); }
}
```

### 6.2 æ°›å›´è„‰å†²åŠ¨ç”»

```css
@keyframes atmosphere-pulse {
    0%, 100% { opacity: 0.7; }
    50% { opacity: 1; }
}

@keyframes atmosphere-flash {
    0%, 90%, 100% { opacity: 0; }
    92% { opacity: 0.6; }
    94% { opacity: 0; }
    96% { opacity: 0.4; }
}
```

### 6.3 SVGè£…é¥°å¾®åŠ¨ç”»

- ç«æŠŠï¼š`torch-flicker`ï¼ˆscaleYæŠ–åŠ¨ + opacityå˜åŒ–ï¼‰
- æ°´æ™¶ï¼š`crystal-pulse`ï¼ˆbrightnessè„‰å†² + å¾®scaleï¼‰
- è˜‘è‡ï¼š`mushroom-sway`ï¼ˆå¾®rotateæ‘†åŠ¨ï¼‰
- æ——å¸œ/è—¤è”“ï¼š`banner-wave`ï¼ˆskewX + translateXæ³¢åŠ¨ï¼‰

---

## ä¸ƒã€åœºæ™¯è¿‡æ¸¡åŠ¨ç”»

### 7.1 æ¢æ€ªæ—¶çš„åœºæ™¯è½¬æ¢

å½“æ€ªç‰©å±æ€§æ”¹å˜æ—¶ï¼Œä¸æ˜¯ç¬é—´åˆ‡æ¢ï¼Œè€Œæ˜¯æ¸å˜è¿‡æ¸¡ï¼š

```javascript
BattleMode.transitionScene = function(oldType, newType) {
    // 1. æ—§åœºæ™¯æ·¡å‡º (0.3s)
    layers.forEach(l => l.style.opacity = '0');

    // 2. åˆ‡æ¢class (0.3så)
    setTimeout(() => {
        this._applySceneClasses(newType);
        // 3. æ–°åœºæ™¯æ·¡å…¥ (0.5s)
        layers.forEach(l => {
            l.style.opacity = '1';
            l.classList.add('scene-entering');
        });
    }, 300);
};
```

### 7.2 Bosså‡ºåœºç‰¹æ•ˆ

Bossæ€ªå‡ºç°æ—¶å¢åŠ é¢å¤–è§†è§‰æ•ˆæœï¼š
- åœºæ™¯æ•´ä½“é—ªçƒä¸€æ¬¡ï¼ˆç™½è‰²flash overlay 0.3sï¼‰
- æ°›å›´å±‚åŠ å¼ºï¼ˆopacityä»0.7æå‡åˆ°1.0ï¼‰
- åœ°é¢éœ‡åŠ¨ï¼ˆarenaå¾®transform:translateYæŠ–åŠ¨ 0.5sï¼‰
- æ€ªç‰©auraæ”¾å¤§1.5å€

---

## å…«ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 8.1 åŠ¨ç”»å±æ€§ç™½åå•

**åªå…è®¸åŠ¨ç”»è¿™äº›å±æ€§**ï¼ˆGPUåˆæˆï¼Œ0å¸ƒå±€å¼€é”€ï¼‰ï¼š
- `transform`ï¼ˆtranslateX/Y, scale, rotateï¼‰
- `opacity`
- `filter`ï¼ˆä»…åœ¨å•ä¸ªå®¹å™¨ä¸Šï¼‰

**ç»ä¸åŠ¨ç”»**ï¼š
- `width`, `height`, `top`, `left`ï¼ˆè§¦å‘å¸ƒå±€ï¼‰
- `background-position`ï¼ˆè§¦å‘ç»˜åˆ¶ï¼‰
- `box-shadow`ï¼ˆè§¦å‘ç»˜åˆ¶ï¼‰
- `border-radius`ï¼ˆè§¦å‘ç»˜åˆ¶ï¼‰

### 8.2 will-change ç­–ç•¥

```css
/* åªå¯¹åŠ¨ç”»å±‚ä½¿ç”¨will-change */
.scene-far-detail,
.scene-mid-detail,
.scene-atmosphere {
    will-change: transform, opacity;
}

/* ç²’å­å…ƒç´ ä¸è®¾will-changeï¼ˆå¤ªå¤šäº†ä¼šé€‚å¾—å…¶åï¼‰ */
```

### 8.3 å‡å°‘è¿åŠ¨æ¨¡å¼

```css
@media (prefers-reduced-motion: reduce) {
    .scene-element,
    .scene-far-detail,
    .scene-mid-detail,
    .scene-atmosphere {
        animation: none !important;
    }
}
```

### 8.4 ä½ç«¯è®¾å¤‡æ£€æµ‹

```javascript
// å¦‚æœè®¾å¤‡å¸§ç‡ä½äº30fpsï¼Œé™çº§ç²’å­æ•°é‡
var _lowPerformance = false;
var _frameCount = 0;
var _lastTime = performance.now();

function checkPerformance() {
    _frameCount++;
    var now = performance.now();
    if (now - _lastTime >= 2000) {
        var fps = _frameCount / ((now - _lastTime) / 1000);
        _lowPerformance = fps < 30;
        _frameCount = 0;
        _lastTime = now;
    }
    requestAnimationFrame(checkPerformance);
}
```

---

## ä¹ã€å®æ–½è®¡åˆ’

### Phase 1ï¼šåŸºç¡€å±‚ç»“æ„ + æ°›å›´å åŠ ï¼ˆæœ€å¤§è§†è§‰æå‡ï¼‰
**é¢„æœŸæ•ˆæœ**ï¼šåœºæ™¯ç«‹å³å˜å¾—æ›´æœ‰æ·±åº¦å’Œæ°›å›´æ„Ÿ

1. index.html æ·»åŠ 4ä¸ªæ–°å±‚ DOM
2. scenes.css æ·»åŠ æ–°å±‚åŸºç¡€æ ·å¼
3. å®ç° `.scene-atmosphere` çš„24ç§mix-blend-modeå…‰æ•ˆ
4. å®ç° CSS filter mood ç³»ç»Ÿï¼ˆ12ç§æ°›å›´æ»¤é•œï¼‰
5. battle-arena.js æ›´æ–° applyMonsterTheme() ç®¡ç†æ–°å±‚

### Phase 2ï¼šå¤©ç©ºå¢å¼º + æ˜Ÿç©ºç³»ç»Ÿ
**é¢„æœŸæ•ˆæœ**ï¼šå¤©ç©ºä»å•è°ƒæ¸å˜å˜æˆä¸°å¯Œçš„å¤šå±‚å¤©å¹•

1. é‡å†™24ç§ .scene-sky ä¸º10+è‰²åœæ¸å˜
2. å®ç° .scene-stars çš„æœˆäº®/å¤ªé˜³/æ˜Ÿç©º/æå…‰
3. æ·»åŠ å¤©ä½“åŠ¨ç”»ï¼ˆæ˜Ÿæ˜Ÿé—ªçƒã€æå…‰æ‘†åŠ¨ï¼‰

### Phase 3ï¼šSVGè£…é¥°ç³»ç»Ÿ
**é¢„æœŸæ•ˆæœ**ï¼šåœºæ™¯ä¸­å‡ºç°å¯è¯†åˆ«çš„å…·ä½“ç‰©ä½“ï¼ˆç«æŠŠã€æ°´æ™¶ã€æ ‘æœ¨ï¼‰

1. åˆ›å»º8-12ä¸ªé€šç”¨SVGç»„ä»¶
2. å®ç° .scene-far-detail å’Œ .scene-mid-detail
3. ä¸ºæ¯ç§åœºæ™¯é…ç½®2-4ä¸ªSVGè£…é¥°
4. æ·»åŠ SVGå¾®åŠ¨ç”»ï¼ˆç«æŠŠé—ªçƒã€æ°´æ™¶è„‰å†²ç­‰ï¼‰

### Phase 4ï¼šè§†å·®åŠ¨ç”» + å‰ªå½±å‘å…‰
**é¢„æœŸæ•ˆæœ**ï¼šåœºæ™¯æœ‰äº†æ·±åº¦ç§»åŠ¨æ„Ÿï¼Œå‰ªå½±æ¸…æ™°å¯è§

1. è¿œæ™¯/ä¸­æ™¯æ·»åŠ æ…¢é€Ÿè§†å·®æ¼‚ç§»åŠ¨ç”»
2. æ‰€æœ‰å‰ªå½±æ·»åŠ  drop-shadow å‘å…‰è¾¹ç¼˜
3. å¢å¼ºå‰ªå½±å¯¹æ¯”åº¦ï¼ˆä½¿ç”¨æ›´æ˜æ˜¾çš„é¢œè‰²å·®ï¼‰

### Phase 5ï¼šåœºæ™¯è¿‡æ¸¡ + Bossç‰¹æ•ˆ
**é¢„æœŸæ•ˆæœ**ï¼šæ¢æ€ªæ›´æµç•…ï¼ŒBosså‡ºåœºæœ‰ä»ªå¼æ„Ÿ

1. å®ç°å¹³æ»‘åœºæ™¯è¿‡æ¸¡åŠ¨ç”»
2. Bosså‡ºåœºé—ªå…‰+éœ‡åŠ¨æ•ˆæœ
3. åœºæ™¯filterçš„å¹³æ»‘è¿‡æ¸¡

### Phase 6ï¼šæ€§èƒ½ä¼˜åŒ– + æµ‹è¯•
1. æ·»åŠ  prefers-reduced-motion æ”¯æŒ
2. æ·»åŠ ä½ç«¯è®¾å¤‡æ£€æµ‹å’Œé™çº§
3. å…¨åœºæ™¯åŠŸèƒ½æµ‹è¯•
4. ç§»åŠ¨ç«¯æ€§èƒ½æµ‹è¯•ï¼ˆç›®æ ‡ï¼šæ‰€æœ‰åœºæ™¯ > 45fpsï¼‰

---

## åã€æ–‡ä»¶å˜æ›´æ¸…å•

| æ–‡ä»¶ | æ”¹åŠ¨ç±»å‹ | æè¿° |
|------|---------|------|
| `index.html` | ä¿®æ”¹ | æ·»åŠ 4ä¸ªæ–°sceneå±‚DOM |
| `css/scenes.css` | å¤§æ”¹ | é‡å†™å¤©ç©ºæ¸å˜ã€æ·»åŠ æ–°å±‚æ ·å¼ã€æ°›å›´å åŠ ã€SVGè£…é¥° |
| `css/scenes-svg.css` | æ–°å¢ | SVG data:URI è£…é¥°åº“ï¼ˆç‹¬ç«‹æ–‡ä»¶é¿å…scenes.cssè¿‡å¤§ï¼‰ |
| `js/battle-arena.js` | ä¿®æ”¹ | æ›´æ–°applyMonsterThemeç®¡ç†æ–°å±‚ã€æ·»åŠ mood filterã€åœºæ™¯è¿‡æ¸¡ |
| `js/battle-combat.js` | å°æ”¹ | Bosså‡ºåœºç‰¹æ•ˆè§¦å‘ |

---

## åä¸€ã€éªŒè¯æ¸…å•

- [ ] ç«ç³»åœºæ™¯ï¼šèƒ½çœ‹åˆ°ç«å±±å‰ªå½±+å‘å…‰è½®å»“ã€åº•éƒ¨å²©æµ†å…‰ç…§ã€ç«æŠŠSVGã€ä¸Šå‡ç«ç„°
- [ ] å†°ç³»åœºæ™¯ï¼šæå…‰å¸¦æ‘†åŠ¨ã€å†°å±±å‘å…‰è½®å»“ã€å†°æ™¶SVGã€é£˜è½é›ªèŠ±ã€å†·å…‰æ°›å›´
- [ ] æš—ç³»åœºæ™¯ï¼šå¤§æœˆäº®+æš—è§’æ•ˆæœã€åŸå ¡å‘å…‰è½®å»“ã€ç«æŠŠSVGã€å¹½é­‚å…‰çƒ
- [ ] 24ç§åœºæ™¯å„æœ‰æ˜æ˜¾è§†è§‰å·®å¼‚ï¼ˆè‰²è°ƒã€å»ºç­‘ã€è£…é¥°ã€å…‰æ•ˆã€ç²’å­å…¨ä¸åŒï¼‰
- [ ] Bosså‡ºåœºæœ‰ç™½è‰²flash + éœ‡åŠ¨æ•ˆæœ
- [ ] æ¢æ€ªæ—¶åœºæ™¯å¹³æ»‘è¿‡æ¸¡ï¼ˆä¸é—ªçƒï¼‰
- [ ] iPhone SE (ä½ç«¯) è¿è¡Œæµç•… > 45fps
- [ ] iPad è¿è¡Œæµç•… > 55fps
- [ ] prefers-reduced-motion ä¸‹æ— åŠ¨ç”»
- [ ] æ‰€æœ‰JSæ–‡ä»¶é€šè¿‡ node -c è¯­æ³•æ£€æŸ¥
